<!DOCTYPE html>
<html>

  <head>

    <title>HTML5 Challenge - Clock Face</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <style type="text/css">

      #myCanvas {
        background-color: black;
        border-radius: 400px;
      }

    </style>

  </head>

  <body>

    <canvas id="myCanvas" width="800" height="800"></canvas>

    <script type="text/javascript">

      var myCanvas = document.getElementById("myCanvas");
      var context = myCanvas.getContext("2d");

      var width = myCanvas.width;
      var centerWidth = width/2;

      var height = myCanvas.height;
      var centerHeight = height/2;

      var indent = 50;

      //Numbers
      context.fillStyle = "white";
      context.font = "30px Arial";
      context.textAlign = "center";
      context.textBaseline = "middle";

      //for formula for number positions
      for (var i = 1; i <= 12; i++) {
        var numHtPos = centerHeight + ((centerHeight - indent) * (Math.sin(((i) + 9) * (Math.PI / 6))));
        var numWdPos = centerWidth + ((centerWidth - indent) * (Math.cos(((i) + 9) * (Math.PI / 6))));

        context.fillText(i, numWdPos, numHtPos);
      };

      //Getting time
      function getTime() {
        var date = new Date();
        var h = date.getHours();
        var m = date.getMinutes();
        var s = date.getSeconds();

        return { h:h, m:m, s:s };
      };

      var time = getTime();

      //Set hand
      function setHourHand() {

        context.moveTo(centerWidth, centerHeight);

        indent = 200;

        var hourHeight = centerHeight + ((centerHeight - indent) * (Math.sin(((time.h) + 9) * (Math.PI / 6))));
        var hourWidth = centerWidth + ((centerWidth - indent) * (Math.cos(((time.h) + 9) * (Math.PI / 6))));

        context.lineTo(hourWidth, hourHeight);
        context.strokeStyle = "white";
        context.lineWidth = 4;
        context.stroke();

      };

      function setMinuteHand() {

        context.moveTo(centerWidth, centerHeight);

        indent = 125;

        var minuteHeight = centerHeight + ((centerHeight - indent) * (Math.sin((((time.m)/5) + 9) * (Math.PI / 6))));
        var minuteWidth = centerWidth + ((centerWidth - indent) * (Math.cos((((time.m)/5) + 9) * (Math.PI / 6))));

        context.lineTo(minuteWidth, minuteHeight);
        context.strokeStyle = "white";
        context.lineWidth = 2;
        context.stroke();

      };

      function setSecondHand() {

        context.moveTo(centerWidth, centerHeight);

        indent = 50;

        var secondHeight = centerHeight + ((centerHeight - indent) * (Math.sin((((time.s)/5) + 9) * (Math.PI / 6))));
        var secondWidth = centerWidth + ((centerWidth - indent) * (Math.cos((((time.s)/5) + 9) * (Math.PI / 6))));

        context.lineTo(secondWidth, secondHeight);
        context.strokeStyle = "white";
        context.lineWidth = 1;
        context.stroke();

      };

      setHourHand();
      setMinuteHand();
      setSecondHand();


      //Keep to real time, run every second
      window.setInterval(function(){
        setHourHand();
        setMinuteHand();
        setSecondHand();
      }, 1000);

      //Centre circle
      context.beginPath();
      context.arc(centerWidth, centerHeight, 20, 0*Math.PI, 2*Math.PI);
      context.fillStyle = "white";
      context.fill();



      //TO DO

      // - set commonly used expressions to var and func - keep it DRY
      // - at the moment, hands do not reposition but thicken on reload (window.setInterval runs formulae)
      // - check hands are correctly positioned and equations are correct.
      
    </script>

  </body>

</html>
